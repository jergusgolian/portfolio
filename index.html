<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jergu≈° Golian</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="img/logo.png">
</head>
<body>
    <div class="circle"></div>
    <div class="small-circle"></div>
    <nav>
        <a href="#landing" style="display: flex; align-items: center;">
            <img src="img/logo.png" alt="logo" width="50" class="nd logo">
            <h1>Jergu≈° Golian</h1>
        </a>
        <button class="hamburger-toggle" aria-expanded="false" aria-controls="main-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
        <ul>
            <li class><a href="#info">O¬†mne</a></li>
            <li class><a href="#design">Design</a></li>
            <li class><a href="#videomaking">Videotvorba</a></li>
            <li class><a href="#programming">Programovanie</a></li>
        </ul>
        <div class="indicator"></div>
    </nav>
    <div id="landing">
        <div class="landing-image"></div>
        <video autoplay muted playsinline preload="auto"><source src="img/logo animation.mp4"></video>
    </div>
    <div class="main">
        <div id="info">
            <div style="height: 120px;"></div>
            <h2>O mne</h2>
            <div class="text-image">
                <div class="text info">
                    <p>
                        Som ≈°tudentom SP≈†E Zochova, ktor√©ho bav√≠ sp√°ja≈• kreativitu s technol√≥giami. 
                        U≈æ od prv√©ho kontaktu s dizajnom, videotvorbou a programovan√≠m ma fascinovalo, 
                        ako sa d√° pomocou n√°padu a p√°r riadkov k√≥du vytvori≈• nieƒço, ƒço zanech√° dojem.
                        <br><br>
                        Najviac ma napƒ∫≈àa mo≈ænos≈• premeni≈• my≈°lienku na re√°lny projekt -
                        ƒçi u≈æ ide o vizu√°lny n√°vrh, video alebo web.
                        Ka≈æd√Ω nov√Ω n√°pad beriem ako pr√≠le≈æitos≈• posun√∫≈• svoje schopnosti ƒèalej a nauƒçi≈• sa nieƒço nov√©.
                        <br><br>
                        Na tejto str√°nke zverej≈àujem v≈°etky svoje dokonƒçen√© projekty. 
                        Beriem ju ako priestor, kde m√¥≈æem uk√°za≈• svoju cestu,
                        napredovanie a to, ƒço ma na tvorbe najviac bav√≠ - slobodu tvori≈•.

                    </p>
                </div>
                <img src="img/ja.jpg" alt="Jergus Golian">
            </div>
            <div class="quote">
                <hr>
                <p>
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Et, culpa.
                    Labore explicabo odio temporibus. Neque aliquam quae similique assumenda,
                    sequi voluptatibus blanditiis vel magni nesciunt nobis nisi eligendi. Ducimus, ea.
*Pridat citat zo strany 42
                </p>
                <hr>
            </div>
        </div>
        <div id="design">
            <div style="height: 120px;"></div>
            <h2>Design</h2>
            <div class="text-image">
                <div class="text">
                    <h3>Moje Logo</h3>
                    <p>
                        Toto logo vzniklo ako jednoduch√Ω, no v√Ωrazn√Ω symbol mojej tvorby.
                        P√≠smeno "G" v sebe sp√°ja ƒçistotu tvarov a rovnov√°hu medzi estetikou
                        a funkƒçnos≈•ou - presne to, ƒço sa sna≈æ√≠m prin√°≈°a≈• aj do svojich projektov.
                        <br><br>
                        Minimalistick√Ω dizajn vych√°dza z my≈°lienky, ≈æe aj mal√Ω prvok m√¥≈æe nies≈• siln√Ω v√Ωznam.
                        Logo reprezentuje moju identitu - spojenie kreativity, prec√≠znosti a osobn√©ho pr√≠stupu k tvorbe.
                        <br><br>
                        Je to prv√Ω krok k budovaniu identity, ktor√° odr√°≈æa to, k√Ωm som, a kam chcem v tvorbe smerova≈•.
                    </p>
                </div>
                <img src="img/moje-logo.jpg" alt="My Logo">
            </div>
            <a href="#design" class="web-button">ƒéal≈°ie</a>
        </div>
        <div id="videomaking">
            <div style="height: 120px;"></div>
            <h2>Videotvorba</h2>
            <div class="text-image">
                <div class="text">
                    <h3>Lock-In</h3>
                    <p>
                        Kr√°tky film, ktor√Ω zdanlivo rozpr√°va o obyƒçajnom upratovan√≠ izby - no v skutoƒçnosti ukazuje nieƒço oveƒæa hlb≈°ie.
                        T√©ma odp√∫tania sa od mobilu symbolizuje snahu z√≠ska≈• sp√§≈• kontrolu nad vlastn√Ωm ƒçasom, priestorom a mysƒæou.
                        <br><br>
                        Film vznikol ako osobn√Ω experiment s cieƒæom zachyti≈•, ako ƒçasto sa nech√°me ‚Äûuzamkn√∫≈•‚Äú vo virtu√°lnom svete, a ƒço sa stane, keƒè sa od neho na chv√≠ƒæu odpoj√≠me.
                        <br><br>
                        Jednoduch√° vizu√°lna forma a pokojn√© tempo filmu vytv√°raj√∫ priestor pre div√°ka, aby sa zamyslel nad vlastn√Ωmi n√°vykmi a na≈°iel v pr√≠behu k√∫sok seba.
                        Lock-In nie je len o upratanej izbe - je o upratan√≠ v hlave.
                    </p>
                </div>
                <img src="img/lock-in.png" alt="Short-film">
            </div>
            <a href="#videomaking" class="web-button">ƒéal≈°ie</a>
        </div>
        <div id="programming">
            <div style="height: 120px;"></div>
            <h2>Programovanie</h2>
            <div class="text-image">
                <div class="text">
                    <h3>T√°to web-str√°nka</h3>
                    <p>
                        T√°to str√°nka vznikla ako m√¥j osobn√Ω projekt - spojenie v≈°etk√©ho, ƒço ma bav√≠: dizajnu, videotvorby a programovania.
                        Chcel som vytvori≈• priestor, ktor√Ω nebude len uk√°≈ækou mojej pr√°ce, ale aj nieƒç√≠m, ƒço s√°m pou≈æ√≠vam, rozv√≠jam a neust√°le vylep≈°ujem.
                        <br><br>
                        Str√°nka je postaven√° od z√°kladov vlastn√Ωm k√≥dom.
                        Od prv√©ho n√°vrhu a≈æ po fin√°lne anim√°cie a rozlo≈æenie som sa sna≈æil o ƒçist√Ω, prehƒæadn√Ω a funkƒçn√Ω dizajn, ktor√Ω odr√°≈æa m√¥j ≈°t√Ωl - jednoduchos≈•, prepojenos≈• a d√¥raz na detaily.
                        <br><br>
                        Je to projekt, ktor√Ω rastie spolu so mnou.
                        Ka≈æd√° √∫prava, ka≈æd√° nov√° sekcia ƒçi funkcia predstavuje ƒèal≈°√≠ krok v mojom v√Ωvoji ako tvorcu.
                        Pre m≈àa nie je len v√Ωkladnou skri≈àou projektov - je d√¥kazom toho, ≈æe uƒçenie, tvorba a sebazdokonaƒæovanie nikdy nekonƒçia.

                    </p>
                </div>
                <img src="img/coding.png" alt="Code">
            </div>
            <a href="#programming" class="web-button">ƒéal≈°ie</a>
        </div>
        <div class="foot"></div>
    </div>
    <script>
        const nav = document.querySelector('nav');
        const hamburger = document.querySelector('.hamburger-toggle');
        const navLinks = document.querySelectorAll('nav ul li');
        const indicator = document.querySelector('.indicator');
        const homeLink = document.querySelector('nav a:first-child');
        
        let userClicked = false; // <-- 1. NEW FLAG VARIABLE
        let scrollTimeout; // Helper for the timeout

        // Function to update the indicator's position (No changes here)
        function updateIndicatorPosition(activeElement) {
            if (!activeElement || window.innerWidth < 1024) { 
                indicator.style.display = 'none';
                return;
            }
            indicator.style.display = 'block';
            const navRect = nav.getBoundingClientRect();
            const elementRect = activeElement.getBoundingClientRect();
            const newLeft = elementRect.left - navRect.left - 50;
            const newTop = 10;
            let newHeight;
            let newWidth = elementRect.width;
            const firstLi = document.querySelector('nav ul li'); 
            if (activeElement === homeLink && firstLi) {
                newHeight = firstLi.getBoundingClientRect().height;
                newWidth = elementRect.width*0.5;
            } else {
                newHeight = elementRect.height;
                newWidth = elementRect.width + 100;
            }
            indicator.style.left = `${newLeft}px`;
            indicator.style.width = `${newWidth}px`;
            indicator.style.height = `${newHeight}px`; 
            indicator.style.top = `${newTop + 5}px`; 
            indicator.style.transition = 'left 0.3s ease-out, width 0.3s ease-out, top 0.3s ease-out';
        }

        // --- EXISTING CLICK AND LOAD LOGIC ---
        homeLink.classList.add('active'); 
        window.onload = function() {
            window.scrollTo(0, 0);
            updateIndicatorPosition(homeLink);
        };

        // Click handler for navigation links (li elements)
        navLinks.forEach(item => {
            item.addEventListener('click', (e) => {
                userClicked = true; // <-- 2. SET FLAG ON CLICK
                
                navLinks.forEach(i => i.classList.remove('active'));
                homeLink.classList.remove('active'); 
                item.classList.add('active');
                updateIndicatorPosition(item); 
                
                setTimeout(() => {
                    nav.classList.remove('menu-open');
                    hamburger.setAttribute('aria-expanded', false);
                }, 100); 

                // Reset the flag after the smooth scroll is likely finished
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => { userClicked = false; }, 1000); // 1 second
            });
        });

        // Click handler for the logo/main link
        homeLink.addEventListener('click', (e) => {
            userClicked = true; // <-- 2. SET FLAG ON CLICK (also for home)
            
            navLinks.forEach(i => i.classList.remove('active'));
            homeLink.classList.add('active');
            updateIndicatorPosition(homeLink);
            
            setTimeout(() => {
                nav.classList.remove('menu-open');
                hamburger.setAttribute('aria-expanded', false);
            }, 100);

            // Reset the flag after the smooth scroll is likely finished
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => { userClicked = false; }, 1000); // 1 second
        });
        hamburger.addEventListener('click', () => {
            nav.classList.toggle('menu-open');
            const isExpanded = nav.classList.contains('menu-open');
            hamburger.setAttribute('aria-expanded', isExpanded);
        });

        window.addEventListener('resize', () => {
            const currentActive = document.querySelector('nav ul li.active') || document.querySelector('nav a.active');
            updateIndicatorPosition(currentActive);
        });

        // --- üöÄ SCROLL-SPY LOGIC ---
        const sections = document.querySelectorAll('.main > div, #landing');
        const observerOptions = {
            root: null, 
            rootMargin: '-50% 0px -50% 0px',
            threshold: 0
        };

        function observerCallback(entries) {
            if (userClicked) return; // <-- 3. CHECK FLAG (If user clicked, do nothing)
            
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    let elementToActivate;
                    
                    if (id === 'landing') {
                        elementToActivate = homeLink;
                    } else {
                        const matchingLink = document.querySelector(`nav ul li a[href="#${id}"]`);
                        if (matchingLink) {
                            elementToActivate = matchingLink.parentNode;
                        }
                    }
                    if (elementToActivate) {
                        navLinks.forEach(i => i.classList.remove('active'));
                        homeLink.classList.remove('active');
                        elementToActivate.classList.add('active');
                        updateIndicatorPosition(elementToActivate);
                    }
                }
            });
        }

        const observer = new IntersectionObserver(observerCallback, observerOptions);
        sections.forEach(sec => observer.observe(sec));


        console.clear();

        // Select the circle element
        const circleElement = document.querySelector('.circle');
        const scircleElement = document.querySelector('.small-circle');
        
        // --- NEW: Add mousedown/mouseup listeners for 'clicked' state ---
        document.addEventListener('mousedown', () => {
            scircleElement.classList.add('clicked');
        });

        document.addEventListener('mouseup', () => {
            scircleElement.classList.remove('clicked');
        });
        
        // --- NEW: Select all interactive elements ---
        const interactiveElements = document.querySelectorAll('a, button, .web-button');

        // Function to handle cursor class change on hover
        function addHoverClass() {
            scircleElement.classList.add('hovering');
        }

        function removeHoverClass() {
            scircleElement.classList.remove('hovering');
        }

        // Add event listeners to all interactive elements
        interactiveElements.forEach(element => {
            element.addEventListener('mouseenter', addHoverClass);
            element.addEventListener('mouseleave', removeHoverClass);
        });
        // --- END NEW CODE ---

        // Create objects to track mouse position and custom cursor position
        const mouse = { x: 0, y: 0 }; // Track current mouse position
        const previousMouse = { x: 0, y: 0 } // Store the previous mouse position
        const circle = { x: 0, y: 0 }; // Track the circle position

        // Initialize variables to track scaling and rotation
        let currentScale = 0; // Track current scale value
        let currentAngle = 0; // Track current angle value

        // Update mouse position on the 'mousemove' event
        window.addEventListener('mousemove', (e) => {
        mouse.x = e.x;
        mouse.y = e.y;
        });

        // Smoothing factor for cursor movement speed (0 = smoother, 1 = instant)
        const speed = 0.5;

        // Start animation
        const tick = () => {
        // MOVE
        // Calculate circle movement based on mouse position and smoothing
        circle.x += (mouse.x - circle.x) * speed;
        circle.y += (mouse.y - circle.y) * speed;
        // Create a transformation string for cursor translation
        const translateTransform = `translate(${circle.x}px, ${circle.y}px)`;

        // SQUEEZE
        // 1. Calculate the change in mouse position (deltaMouse)
        const deltaMouseX = mouse.x - previousMouse.x;
        const deltaMouseY = mouse.y - previousMouse.y;
        // Update previous mouse position for the next frame
        previousMouse.x = mouse.x;
        previousMouse.y = mouse.y;
        // 2. Calculate mouse velocity using Pythagorean theorem and adjust speed
        const mouseVelocity = Math.min(Math.sqrt(deltaMouseX**2 + deltaMouseY**2) * 4, 150); 
        // 3. Convert mouse velocity to a value in the range [0, 0.5]
        const scaleValue = (mouseVelocity / 150) * 0.5;
        // 4. Smoothly update the current scale
        currentScale += (scaleValue - currentScale) * speed;
        // 5. Create a transformation string for scaling
        let scaleTransform = `scale(${1 + currentScale}, ${1 - currentScale})`;

        // ROTATE
        // 1. Calculate the angle using the atan2 function
        const angle = Math.atan2(deltaMouseY, deltaMouseX) * 180 / Math.PI;
        // 2. Check for a threshold to reduce shakiness at low mouse velocity
        if (mouseVelocity > 20) {
            currentAngle = angle;
        }
        // 3. Create a transformation string for rotation
        const rotateTransform = `rotate(${currentAngle}deg)`;

        // Apply all transformations to the circle element in a specific order: translate -> rotate -> scale
        circleElement.style.transform = `${translateTransform} ${rotateTransform} ${scaleTransform}`;
        scircleElement.style.transform = `${translateTransform} ${rotateTransform} ${scaleTransform}`;
        
        // Request the next frame to continue the animation
        window.requestAnimationFrame(tick);
        }

        // Start the animation loop
        tick();
    </script>
</body>
</html>